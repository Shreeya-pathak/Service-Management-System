<mat-card class="page-card">

  <!-- Page Header -->
  <div class="page-header">
    <mat-icon class="page-icon">payments</mat-icon>
    <h2>Pending Payment Approvals</h2>
  </div>

  <!-- Grouped by Customer -->
  <div
    class="customer-group"
    *ngFor="let group of groupedInvoices">

    <!-- Customer Header (CLICKABLE) -->
    <div
      class="customer-header clickable"
      (click)="toggleCustomer(group.customerName)">

      <div class="left">
        <mat-icon>person</mat-icon>
        <span>{{ group.customerName }}</span>
      </div>

      <mat-icon
        class="expand-icon"
        [class.rotated]="expandedCustomer === group.customerName">
        expand_more
      </mat-icon>
    </div>

    <!-- Expandable Invoice List -->
    <div
      class="invoice-wrapper"
      *ngIf="expandedCustomer === group.customerName">

      <mat-card
        class="invoice-card"
        *ngFor="let i of group.invoices">

        <div class="invoice-info">
          <p>
            <mat-icon>build</mat-icon>
            <strong>Service:</strong> {{ i.serviceName }}
          </p>

          <p>
            <mat-icon>currency_rupee</mat-icon>
            <strong>Amount:</strong> â‚¹{{ i.totalAmount }}
          </p>
        </div>

        <button
          mat-raised-button
          color="primary"
          (click)="openApproveDialog(i)">
          <mat-icon>check_circle</mat-icon>
          Approve
        </button>

      </mat-card>

    </div>

  </div>

</mat-card>
