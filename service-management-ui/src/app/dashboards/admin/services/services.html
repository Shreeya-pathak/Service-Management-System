<div class="page">

  <!-- Page Header -->
  <h2 class="page-title">Services</h2>

  <!-- Search by Category -->
  <input
    type="text"
    placeholder="Search by service name..."
    class="search"
    [(ngModel)]="searchCategory" />

  <!-- Add / Edit Form -->
  <form [formGroup]="serviceForm" (ngSubmit)="submit()" class="form-row">

    <input placeholder="Service Name" formControlName="serviceName" />
    <input type="number" placeholder="Price" formControlName="price" />
    <input type="number" placeholder="SLA (hrs)" formControlName="slaHours" />

    <select formControlName="serviceCategoryId">
      <option value="">Select Category</option>
      <option *ngFor="let c of categories" [value]="c.serviceCategoryId">
        {{ c.categoryName }}
      </option>
    </select>

    <textarea placeholder="Description" formControlName="description"></textarea>

    <button type="submit" class="primary">
      {{ isEditMode ? 'Update Service' : 'Add Service' }}
    </button>

    <button
      type="button"
      class="ghost"
      *ngIf="isEditMode"
      (click)="resetForm()">
      Cancel
    </button>

  </form>

  <!-- GROUPED SERVICES -->
  <div
    class="category-group"
    *ngFor="let group of groupedServices">

    <!-- Category Header -->
    <div class="category-header">
      {{ group.categoryName }}
    </div>

    <!-- Services under category -->
    <div
      class="service-card"
      *ngFor="let s of group.services">

      <div class="info">
        <strong>{{ s.serviceName }}</strong>
        <p>{{ s.description || 'No description' }}</p>
        <span>₹{{ s.price }} • SLA {{ s.slaHours }} hrs</span>
      </div>

      <div class="actions">
        <button class="edit" (click)="edit(s)">Edit</button>

        <mat-slide-toggle
          color="primary"
          [checked]="s.isActive"
          [disabled]="s._loading"
          (change)="onToggleService(s, $event)">
        </mat-slide-toggle>
      </div>

    </div>

  </div>

</div>
