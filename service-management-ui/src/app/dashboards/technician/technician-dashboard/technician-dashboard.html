<div class="tech-dashboard" *ngIf="!loading">

  <!-- HEADER -->
  <div class="dashboard-header">
    <div>
      <h2>Technician Dashboard</h2>
      <p class="subtitle">Hereâ€™s a quick overview of your work status</p>
    </div>

    <div
      class="availability-chip"
      [class.available]="dashboard.availabilityStatus === 'Available'"
      [class.unavailable]="dashboard.availabilityStatus === 'Unavailable'">
      <span class="material-icons">
        {{ dashboard.availabilityStatus === 'Available'
          ? 'check_circle'
          : 'cancel' }}
      </span>
      {{ dashboard.availabilityStatus }}
    </div>
  </div>

  <!-- KPI CARDS -->
  <div class="stats-grid">

    <mat-card class="stat-card pending">
      <span class="material-icons">hourglass_empty</span>
      <div>
        <p class="label">Pending</p>
        <h3>{{ dashboard.pendingCount }}</h3>
      </div>
    </mat-card>

    <mat-card class="stat-card progress">
      <span class="material-icons">autorenew</span>
      <div>
        <p class="label">In Progress</p>
        <h3>{{ dashboard.inProgressCount }}</h3>
      </div>
    </mat-card>

    <mat-card class="stat-card completed">
      <span class="material-icons">task_alt</span>
      <div>
        <p class="label">Completed</p>
        <h3>{{ dashboard.completedCount }}</h3>
      </div>
    </mat-card>

  </div>

  <!-- AVAILABILITY -->
  <!-- AVAILABILITY -->
<mat-card class="availability-card">
  <h3>Availability Status</h3>

  <div class="availability-toggle">

    <div
      class="availability-option available"
      [class.active]="dashboard.availabilityStatus === 'Available'"
      (click)="updateAvailability('Available')">

      <span class="material-icons">check_circle</span>
      <div>
        <h4>Available</h4>
        <p>Ready to take new assignments</p>
      </div>
    </div>

    <div
      class="availability-option unavailable"
      [class.active]="dashboard.availabilityStatus === 'Unavailable'"
      (click)="updateAvailability('Unavailable')">

      <span class="material-icons">cancel</span>
      <div>
        <h4>Unavailable</h4>
        <p>Not accepting tasks right now</p>
      </div>
    </div>

  </div>
</mat-card>


</div>
